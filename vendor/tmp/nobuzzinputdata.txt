サンプル要求仕様書
NIL.car
【　変　更　履　歴　】
Ver.
変更日
変更箇所
変更内容
1.0
2016／3／31
All
新規作成
【　目　次　】
1.　はじめに　5
1.1.　目的　5
1.2.　スコープ　5
1.3.　用語定義　6
1.4.　関連文書　7
2.　概要　8
2.1.　製品概要　8
2.2.　システムの機能要件　9
2.3.　システムの非機能要件　9
2.4.　ユーザインターフェイス　10
2.4.1.　操作　10
2.4.2.　表示　11
3.　機能詳細　12
3.1.　定速走行可能条件　12
3.1.1.　車速条件　12
3.1.2.　設定車速条件　12
3.2.　定速走行開始　13
3.2.1.　設定車速あり　13
3.2.2.　設定車速なし　13
3.3.　定速走行中止　14
3.3.1.　「定速走行可能条件」を満足しないことによる中止処理　14
3.3.2.　ブレーキ／CANCELスイッチ押下に伴う中止処理　14
3.3.3.　メインスイッチOFFに伴う中止処理　14
3.3.4.　異常中止処理　14
3.4.　定速走行　15
3.5.　定速走行速度変更　16
3.5.1.　設定車速増加指示　16
3.5.2.　設定車速減少指示　16
3.6.　パラメータ一覧　17
【　表　目　次　】
表　1.31　用語一覧　6
表　2.21　機能要求概要の一覧　9
表　2.31　非機能要求の一覧　9
表　2.41　クルーズコントロールメインスイッチ機能との対応　10
【　図　目　次　】
図　2.51　関連する状態　12
はじめに
目的
本紙は，ツールの確認用として，既存の車両の公開情報から得られたクルーズコントロールシステムについて検討した結果をまとめている．
スコープ
ツールの評価用にのみ用いる．
用語定義
下記に用語及び略語の定義を示す．
表　1.31　用語一覧
用語
英語名
意味
オートキャンセル
Auto　Cancel
定速走行時に，以下の理由からユーザの意思によらず定速走行制御を解除すること．
自システム或いは関連システムの異常検出時．
定速走行可能条件を外れたために，通常走行に戻ること
設定車速
Set　Car　Speed
クルーズコントロールに設定されている車速．
この設定車速が存在しない状態（クリア状態）もある
車速
Car　Speed
車両の対地速度．
本書では，自車のみに使用する
定速走行
Constant-Speed　Driving
設定された車速で，自動的に走行すること
定速走行可能条件
Condition　for　Constant-Speed　driving
定速走行が可能な条件のこと（3.1参照）
定速走行制御
Constant-Speed　Driving　Control
定速走行を実現するためのシステムが実行する制御のこと
(注)日本語については，五十音順，略語についてはアルファベット順である．
関連文書
なし
概要
製品概要
クルーズコントロールシステムは，走行時の車速を一定に保つシステムである．
エンジンスイッチをONとすることで，システムは，クルーズコントロール動作可能状態に遷移する．
クルーズコントロール動作可能状態では，クルーズコントロールシステムに対する指示は，様々なクルーズコントロールスイッチによって行う（2.4.1）．
本システムは，エンジンを制御することで，車速を一定に維持する．
システムの機能要件
本製品の機能概要は以下のとおり．
なお，ここでの主たる機能は，下記RF2（定速走行）のみであり，他はその一部である．
便宜上，分けて記述する．
表　2.21　機能要求概要の一覧
ID
機能名
内容
RF1
定速走行開始
「定速走行」へ移行する．
RF2
定速走行
設定車速を維持した走行を行う．
RF3
定速走行中止
「定速走行」を中止する．
RF4
定速走行速度変更
指定された「定速走行」速度を変更する．
RF5
異常発生時処理
クルーズコントロールの停止，ドライバへの通知を行う．
詳細は3章に示す．
システムの非機能要件
以下の非機能要件を満足すること．
表　2.31　非機能要求の一覧
ID
非機能名
内容
RN1
時間制約
定速走行のための計算は10Hzで行うこと．
なお，入力の値は，数回分の平均値を用いること．
ユーザインターフェイス
操作
クルーズコントロールシステムは，様々なハードウェアスイッチを装備し，操作することによりユーザ操作を実現する．
各ハードウェアスイッチの名称と機能は表　2.41の通り．
表　2.41　クルーズコントロールスイッチとの対応
スイッチ名称
機　能
メインスイッチ
クルーズコントロールシステムのメインスイッチで，押下により，ON／OFFがトグルする．
OFF→ONで，RF1が，ON→OFFでRF3が呼び出される．
ONの間，もしRF4で速度記憶がなされていれば，RF2が機能する．
別名：クルーズコントロールメインスイッチ
ARスイッチ
設定車速を上げる．
設定車速に制御を戻す．
CSスイッチ
設定車速を下げる．
設定車速を設定する．
キャンセルスイッチ
定速走行を解除する．
クルーズコントロール動作可能状態において，クルーズコントロールメインスイッチをONにすることで，メインスイッチON状態に遷移する．
その状態で，ARスイッチ，CSスイッチ，キャンセルスイッチを使用することで，上の表に示す様々な状態遷移を行うことができる．
表示
(1)　ON／OFF表示
クルーズコントロールメインスイッチONの間は，コンビネーションメーターに”CRUISE”表示を行う（関連RF1）．
ウォーニング点滅
クルーズコントロールシステムが定速走行中に異常を検出した場合，”CRUISE”を点滅し，エラー状態に遷移する（関連RF2，RF5）．
エンジンスイッチをOFFにするまで，点滅は継続する
機能詳細
定速走行可能条件
定速走行を行うためには，定速走行可能条件を満足している必要がある．
定速走行条件は，車速条件（3.1.1）と設定車速条件（3.1.2）からなる．
定速走行（RF2）中に，定速走行可能条件から外れた場合は，自動的に定速走行を中止し（RF3），通常走行に戻る．
車速条件
車速が，CC_SPD_LMT_LOW以上，CC_SPD_LMT_HIGH以下であること．
設定車速条件
設定車速が設定されており，かつ「車速－設定車速」が，MAX_V_DEVIATIONより大きいこと．
定速走行開始
クルーズコントロールメインスイッチがONであり，定速走行可能条件を満足している時に，以下のトリガで，定速走行を開始する．
設定車速あり
ARスイッチトリガで，定速走行に遷移する．
設定車速なし
CSスイッチトリガにより，設定車速を設定し，定速走行に遷移する．
定速走行中止
「定速走行可能条件」を満足しないことによる中止処理
「定速走行可能条件」を満足しない場合，定速走行を中止する．
設定車速をクリアする．
また，クルーズコントロールは，OFF状態となり，表示（2.3.2）は消灯する．
ブレーキ／CANCELスイッチ押下に伴う中止処理
ブレーキが押下された場合，定速走行を中止する．
設定車速は維持する．
また，クルーズコントロールは，OFF状態となり，表示（2.3.2）は消灯する．
メインスイッチOFFに伴う中止処理
メインスイッチがOFFに切り替わった場合，定速走行を中止する．
設定車速はクリアする．
また，クルーズコントロールは，OFF状態となり，表示（2.3.2）は消灯する．
異常中止処理
　また，関連するコンピューターから異常通知があった場合，定速走行を中止する．
設定車速はクリアする．
クルーズコントロール動作可能状態からエラー状態に遷移する．
表示（2.3.2）は，異常に伴うウォーニングに切り替える．
定速走行
定速走行のための計算式を以下に示す．
自車速度をVc（Km／h）とし，目標となる設定車速をVt(Km／h)とすると，速度の乖離dV(Km／h)は次式の通り．
dV　=　Vt　–　Vc
自車速度Vc　(Km／h)は，車輪回転速度から得ることができる．
i番目の車輪回転速度をROi（rpm）とすると，今，車輪半径をR_TIRE(mm)として，次式に従う（前後輪は同一の径としている）．
Vc　=　(2π＊　R_TIRE／1000)　＊　(RO1＋RO2＋RO3＋RO4)／4　＊　(60／1000)
目標時間T_CNTRL　(s)までに，目標速度に到達するための必要な加速度Aa(m／s2)は，次式のように表現することができる．
Aa　=　dV／(3.6＊T_CNTRL)
今，車重がW_VEHICLE(Kg)とするとき，必要な駆動力P（N）は，次式で表現できる．
P　=　W_VEHICLE＊Atgt＊Atgt
但し，Atgt　は基本的に　Aa　であるが，最大加速度が，MAX_ACCを超えないように上限をカットする．
即ち：
0　＜=　Aa　＜=　MAX_ACCのとき，Aa
Aa＞MAX_ACCのとき，MAX_ACC
また，Atgtと（現在）推定車体加速度との差は，秒換算でMAX_DELTA_ACCを超えないこと．
定速走行速度変更
設定車速増加指示
定速走行中に，ARスイッチにより設定車速増加指示があった場合，DELTA_SPEED_INCを設定車速に追加する．
但し，CC_SPD_HIGHを超える場合，設定車速は，CC_SPD_HIGHとなる．
設定車速減少指示
定速走行中に，CSスイッチ設定車速減少指示があった場合，DELTA_SPEED_DECを設定車速から減算する．
但し，CC_SPD_LOWを下回る場合は，設定車速は，CC_SPD_LOWとなる．
パラメータ一覧
本書で使用しているパラメータの一覧を示す．
パラメータ名
意味
値
CC_SPD_LOW
定速走行設定可能な下限の速度
40Km／h
CC_SPD_HIGH
定速走行設定可能な上限の速度
100Km／h
CC_SPD_LMT_LOW
定速走行可能な下限の速度
45Km／h
CC_SPD_LMT_HIGH
定速走行可能な上限の速度
100Km／h
MAX_V_DEVIATION
定速走行解除になる「車速－設定車速」の下限値
-16Km／h
R_TIRE
タイヤ半径（全ての車輪は同一半径とする）
310mm
T_CNTRL
定速速度到達目標時間（加速度計算で使用）
10(s)
W_VEHICLE
車両総重量（定員乗車時）
2500Kg
MAX_ACC
最大加速度
2.0m／s2
MAX_DELTA_ACC
最大加速度増分
0.5　m／s3
DELTA_SPEED_INC
一回あたりの指示増加速度
1.6Km／h
DELTA_SPEED_DEC
一回あたりの指示減少速度
1.6Km／h

